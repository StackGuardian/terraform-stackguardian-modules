{
  "ui:title": "StackGuardian Autoscaled Private Runner for AWS",
  "ui:description": "Deploy an auto-scaling EC2 fleet of StackGuardian Private Runners with Lambda-based scaling. This module creates an Auto Scaling Group with a Lambda function that monitors the runner group queue and adjusts capacity accordingly.",
  "create_asg": {
    "ui:widget": "checkbox",
    "ui:description": "Whether to create a new Auto Scaling Group. Set to false to use an existing ASG."
  },
  "existing_asg_name": {
    "ui:placeholder": "my-existing-asg",
    "ui:description": "Name of an existing Auto Scaling Group (only used when create_asg = false)"
  },
  "instance_type": {
    "ui:description": "The EC2 instance type for Private Runner instances (min 4 vCPU, 8GB RAM recommended)"
  },
  "ami_id": {
    "ui:placeholder": "ami-***",
    "ui:description": "The AMI ID with pre-installed dependencies (docker, cron, jq, sg-runner). Required when create_asg = true."
  },
  "aws_region": {
    "ui:description": "The target AWS Region for deployment"
  },
  "runner_group_name": {
    "ui:placeholder": "my-runner-group",
    "ui:description": "Name of the runner group on StackGuardian (from stackguardian_runner_group module)"
  },
  "runner_group_token": {
    "ui:placeholder": "sgr_*** (from runner group module)",
    "ui:widget": "password",
    "ui:description": "Authentication token for the runner group (from stackguardian_runner_group module)"
  },
  "storage_backend_role_arn": {
    "ui:placeholder": "arn:aws:iam::***:role/***",
    "ui:description": "ARN of the IAM role for S3 storage backend access (from stackguardian_runner_group module)"
  },
  "s3_bucket_name": {
    "ui:placeholder": "my-storage-bucket",
    "ui:description": "Name of the S3 bucket for storage backend (from stackguardian_runner_group module)"
  },
  "stackguardian": {
    "ui:title": "StackGuardian Configuration",
    "ui:description": "Configure your StackGuardian platform connection for the Lambda autoscaler",
    "api_key": {
      "ui:placeholder": "sgu_***",
      "ui:widget": "password",
      "ui:description": "Your organization's API key on the StackGuardian Platform"
    },
    "org_name": {
      "ui:placeholder": "your-org-name",
      "ui:description": "Your organization name on the StackGuardian Platform"
    },
    "api_uri": {
      "ui:placeholder": "https://api.app.stackguardian.io",
      "ui:description": "StackGuardian API URI. If not provided, falls back to SG_API_URI environment variable or standard endpoint."
    }
  },
  "override_names": {
    "ui:title": "Resource Naming Configuration",
    "ui:description": "Customize resource names (optional)",
    "global_prefix": {
      "ui:description": "Prefix for naming all AWS resources"
    }
  },
  "network": {
    "ui:title": "Network Configuration",
    "ui:description": "Configure VPC and subnet settings for runner instances",
    "vpc_id": {
      "ui:placeholder": "vpc-***",
      "ui:description": "Existing VPC ID for deployment"
    },
    "subnet_id": {
      "ui:placeholder": "subnet-***",
      "ui:description": "Subnet ID for runner instances (public or private)"
    },
    "associate_public_ip": {
      "ui:widget": "checkbox",
      "ui:description": "Whether to assign public IPs to runner instances"
    },
    "additional_security_group_ids": {
      "ui:description": "Additional security group IDs to attach to instances (optional)"
    }
  },
  "volume": {
    "ui:title": "EBS Volume Configuration",
    "ui:description": "Configure storage settings for runner instances",
    "type": {
      "ui:widget": "select",
      "ui:description": "Type of the EBS volume"
    },
    "size": {
      "ui:description": "Size of the EBS volume in GB (minimum 8GB, 100GB recommended)"
    },
    "delete_on_termination": {
      "ui:widget": "checkbox",
      "ui:description": "Whether to delete the EBS volume on instance termination"
    }
  },
  "firewall": {
    "ui:title": "Security & SSH Configuration",
    "ui:description": "Configure SSH access and additional security rules",
    "ssh_key_name": {
      "ui:placeholder": "my-keypair",
      "ui:description": "Name of existing SSH key pair in AWS"
    },
    "ssh_public_key": {
      "ui:widget": "textarea",
      "ui:placeholder": "ssh-rsa AAAAB3NzaC1yc2E...",
      "ui:options": {
        "rows": 3
      },
      "ui:description": "Custom SSH public key content (takes precedence over ssh_key_name)"
    },
    "ssh_access_rules": {
      "ui:description": "Map of CIDR blocks for SSH access (e.g., {\"office\": \"10.0.0.0/8\"})"
    },
    "additional_ingress_rules": {
      "ui:description": "Additional ingress rules with port, protocol, and cidr_blocks"
    }
  },
  "scaling": {
    "ui:title": "Auto Scaling Configuration",
    "ui:description": "Configure scaling behavior for the runner fleet",
    "min_size": {
      "ui:description": "Minimum number of runner instances"
    },
    "max_size": {
      "ui:description": "Maximum number of runner instances"
    },
    "desired_capacity": {
      "ui:description": "Initial desired number of runner instances"
    },
    "scale_out_threshold": {
      "ui:description": "Queue size that triggers scale-out"
    },
    "scale_in_threshold": {
      "ui:description": "Queue size that triggers scale-in"
    },
    "scale_out_step": {
      "ui:description": "Number of instances to add per scale-out event"
    },
    "scale_in_step": {
      "ui:description": "Number of instances to remove per scale-in event"
    },
    "scale_out_cooldown_duration": {
      "ui:description": "Minutes to wait between scale-out events (minimum 4)"
    },
    "scale_in_cooldown_duration": {
      "ui:description": "Minutes to wait between scale-in events"
    }
  },
  "autoscaler_repo": {
    "ui:title": "Lambda Autoscaler Source",
    "ui:description": "Configure the autoscaler Lambda source repository",
    "url": {
      "ui:description": "Git repository URL for the autoscaler Lambda code"
    },
    "branch": {
      "ui:description": "Git branch to use"
    }
  },
  "lambda_runtime": {
    "ui:description": "Python runtime version for the Lambda function"
  },
  "lambda_timeout": {
    "ui:description": "Timeout in seconds for the Lambda function"
  },
  "lambda_memory_size": {
    "ui:description": "Memory size in MB for the Lambda function"
  },
  "runner_startup_timeout": {
    "ui:description": "Maximum seconds to wait for Docker to start before shutting down instance"
  }
}
